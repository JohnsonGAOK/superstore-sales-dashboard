# ğŸ¯ ç»™è´Ÿè´£ç½‘ç«™çš„ AI çª—å£çš„è¯´æ˜

## ğŸ“‹ ä»»åŠ¡ç›®æ ‡

åœ¨ Vercel ç½‘ç«™ä¸­æ·»åŠ  Dashboard ä»£ç†ï¼Œè§£å†³ Streamlit Cloud åœ¨å›½å†…è®¿é—®æ…¢çš„é—®é¢˜ã€‚

---

## ğŸ”— Dashboard ä¿¡æ¯

**åŸå§‹é“¾æ¥**ï¼šhttps://superstore-sales-dashboard-johnson.streamlit.app/  
**åµŒå…¥é“¾æ¥**ï¼šhttps://superstore-sales-dashboard-johnson.streamlit.app/?embed=true

---

## ğŸš€ å®ç°æ–¹æ¡ˆï¼ˆè¯·æ ¹æ®é¡¹ç›®ç±»å‹é€‰æ‹©ï¼‰

### æ–¹æ¡ˆ Aï¼šNext.js 13+ (App Router) â­ æ¨è

**æ£€æµ‹æ–¹æ³•**ï¼šé¡¹ç›®ä¸­æœ‰ `app/` ç›®å½•

**å®ç°æ­¥éª¤**ï¼š

1. **åˆ›å»ºä»£ç†è·¯ç”±æ–‡ä»¶**ï¼š`app/dashboard/route.js`

å¤åˆ¶ä»¥ä¸‹ä»£ç ï¼š

```javascript
import { NextResponse } from 'next/server';

export const runtime = 'edge';

export async function GET(request) {
  const url = new URL(request.url);
  const streamlitUrl = 'https://superstore-sales-dashboard-johnson.streamlit.app' + url.search;
  
  try {
    const response = await fetch(streamlitUrl, {
      signal: AbortSignal.timeout(10000),
    });
    
    const data = await response.arrayBuffer();
    
    return new NextResponse(data, {
      status: 200,
      headers: {
        'Content-Type': response.headers.get('Content-Type') || 'text/html',
        'Cache-Control': 'public, s-maxage=60, stale-while-revalidate=300',
      },
    });
  } catch (error) {
    return new NextResponse('Dashboard æš‚æ—¶ä¸å¯ç”¨', { status: 503 });
  }
}
```

2. **æ¨é€å¹¶éƒ¨ç½²**

```bash
git add app/dashboard/route.js
git commit -m "Add dashboard proxy"
git push
```

3. **è®¿é—®æµ‹è¯•**

è®¿é—®ï¼š`https://ä½ çš„åŸŸå.com/dashboard?embed=true`

---

### æ–¹æ¡ˆ Bï¼šNext.js 12 (Pages Router)

**æ£€æµ‹æ–¹æ³•**ï¼šé¡¹ç›®ä¸­æœ‰ `pages/` ç›®å½•

**å®ç°æ­¥éª¤**ï¼š

1. **åˆ›å»º API è·¯ç”±**ï¼š`pages/api/dashboard.js`

```javascript
export default async function handler(req, res) {
  const { query } = req;
  const queryString = new URLSearchParams(query).toString();
  const streamlitUrl = `https://superstore-sales-dashboard-johnson.streamlit.app${queryString ? '?' + queryString : ''}`;
  
  try {
    const response = await fetch(streamlitUrl, {
      signal: AbortSignal.timeout(10000),
    });
    
    const data = await response.text();
    
    res.setHeader('Content-Type', response.headers.get('Content-Type') || 'text/html');
    res.setHeader('Cache-Control', 'public, s-maxage=60');
    res.status(200).send(data);
  } catch (error) {
    res.status(503).send('Dashboard æš‚æ—¶ä¸å¯ç”¨');
  }
}

export const config = {
  api: {
    responseLimit: false,
  },
};
```

2. **ï¼ˆå¯é€‰ï¼‰åˆ›å»ºç‹¬ç«‹é¡µé¢**ï¼š`pages/dashboard.js`

```javascript
export default function Dashboard() {
  return (
    <iframe
      src="/api/dashboard?embed=true"
      style={{ width: '100%', height: '100vh', border: 'none' }}
    />
  );
}
```

---

### æ–¹æ¡ˆ Cï¼šçº¯é™æ€ç½‘ç«™ï¼ˆHTML/React/Vueï¼‰

**æ£€æµ‹æ–¹æ³•**ï¼šæ²¡æœ‰ `app/` æˆ– `pages/` ç›®å½•

**å®ç°æ­¥éª¤**ï¼š

1. **åˆ›å»º/ä¿®æ”¹ `vercel.json`**

```json
{
  "rewrites": [
    {
      "source": "/dashboard/:path*",
      "destination": "https://superstore-sales-dashboard-johnson.streamlit.app/:path*"
    }
  ]
}
```

2. **æ¨é€å¹¶éƒ¨ç½²**

```bash
git add vercel.json
git commit -m "Add dashboard proxy"
git push
```

**æ³¨æ„**ï¼šæ­¤æ–¹æ³•å¯èƒ½æ— æ³•å®Œç¾æ”¯æŒ WebSocket

---

## ğŸ¨ åœ¨ç½‘ç«™ä¸­åµŒå…¥

### é€‰é¡¹ 1ï¼šiframe åµŒå…¥ï¼ˆä»»æ„é¡µé¢ï¼‰

```html
<div style="width: 100%; height: 900px; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
    <iframe 
        src="/dashboard?embed=true"
        style="width: 100%; height: 100%; border: none;"
        title="Dashboard"
        loading="lazy">
    </iframe>
</div>
```

### é€‰é¡¹ 2ï¼šReact ç»„ä»¶

```jsx
export default function DashboardEmbed() {
  return (
    <div style={{ width: '100%', height: '900px' }}>
      <iframe
        src="/dashboard?embed=true"
        style={{ width: '100%', height: '100%', border: 'none' }}
        title="Dashboard"
      />
    </div>
  );
}
```

### é€‰é¡¹ 3ï¼šç‹¬ç«‹é¡µé¢

ç›´æ¥è®¿é—®ï¼š`https://ä½ çš„åŸŸå.com/dashboard`

---

## âœ… éªŒè¯æ¸…å•

å®Œæˆåè¯·æ£€æŸ¥ï¼š

- [ ] èƒ½è®¿é—® `/dashboard` è·¯å¾„
- [ ] Dashboard æ­£å¸¸åŠ è½½ï¼ˆ5-10 ç§’å†…ï¼‰
- [ ] å›¾è¡¨äº¤äº’åŠŸèƒ½æ­£å¸¸
- [ ] ç­›é€‰å™¨æ­£å¸¸å·¥ä½œ
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸
- [ ] ä¸åŒæµè§ˆå™¨æµ‹è¯•é€šè¿‡

---

## ğŸ¨ æ ·å¼å»ºè®®

æ ¹æ®ç½‘ç«™é£æ ¼ï¼Œå¯ä»¥è°ƒæ•´ï¼š

### é«˜åº¦
```css
height: 900px;  /* æ¡Œé¢ç«¯ */
height: 600px;  /* ç§»åŠ¨ç«¯ */
```

### è¾¹æ¡†å’Œé˜´å½±
```css
border-radius: 12px;
box-shadow: 0 8px 32px rgba(0,0,0,0.12);
```

### å“åº”å¼
```css
@media (max-width: 768px) {
  .dashboard-container {
    height: 600px !important;
  }
}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: WebSocket ä¸å·¥ä½œï¼Ÿ

**A**: æ·»åŠ  WebSocket ä»£ç†æ”¯æŒ

åœ¨ `next.config.js` ä¸­æ·»åŠ ï¼š

```javascript
module.exports = {
  async rewrites() {
    return [
      {
        source: '/dashboard/_stcore/:path*',
        destination: 'https://superstore-sales-dashboard-johnson.streamlit.app/_stcore/:path*',
      },
    ];
  },
};
```

### Q: æ ·å¼æ˜¾ç¤ºä¸æ­£å¸¸ï¼Ÿ

**A**: æ·»åŠ é™æ€èµ„æºä»£ç†

```javascript
{
  source: '/dashboard/static/:path*',
  destination: 'https://superstore-sales-dashboard-johnson.streamlit.app/static/:path*',
}
```

### Q: è¶…æ—¶é”™è¯¯ï¼Ÿ

**A**: å¢åŠ è¶…æ—¶æ—¶é—´æˆ–ä½¿ç”¨ Edge Runtime

```javascript
export const runtime = 'edge';
```

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

| é¡¹ç›® | æ”¹è¿›å‰ | æ”¹è¿›å |
|-----|-------|-------|
| åŠ è½½é€Ÿåº¦ | 10-30ç§’ | 2-5ç§’ |
| ç¨³å®šæ€§ | âš ï¸ ä¸ç¨³å®š | âœ… ç¨³å®š |
| å›½å†…è®¿é—® | ğŸ˜° å›°éš¾ | ğŸ˜Š æµç•… |

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. æ·»åŠ åŠ è½½åŠ¨ç”»

```html
<div style="position: relative;">
  <div id="loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
    åŠ è½½ä¸­...
  </div>
  <iframe 
    src="/dashboard?embed=true"
    onload="document.getElementById('loading').style.display='none'">
  </iframe>
</div>
```

### 2. é¢„è¿æ¥

```html
<link rel="preconnect" href="https://ä½ çš„åŸŸå.com">
```

### 3. æ‡’åŠ è½½

```html
<iframe loading="lazy" src="/dashboard?embed=true"></iframe>
```

---

## ğŸ‰ å®Œæˆ

ä»£ç†é…ç½®å®Œæˆåï¼š

1. âœ… Dashboard é€šè¿‡ä½ çš„åŸŸåè®¿é—®
2. âœ… å›½å†…ç”¨æˆ·è®¿é—®é€Ÿåº¦å¤§å¹…æå‡
3. âœ… æ‰€æœ‰æ›´æ–°è‡ªåŠ¨åŒæ­¥ï¼ˆæ— éœ€æ”¹ç½‘ç«™ä»£ç ï¼‰
4. âœ… å®Œå…¨å…è´¹ï¼ˆVercel å…è´¹é¢åº¦è¶³å¤Ÿç”¨ï¼‰

**åç»­æ›´æ–°**ï¼šåªéœ€åœ¨ Streamlit é¡¹ç›®ä¸­æ›´æ–°ä»£ç ï¼Œç½‘ç«™è‡ªåŠ¨åŒæ­¥ï¼

---

## ğŸ“ å‚è€ƒæ–‡ä»¶

é¡¹ç›®ä¸­åŒ…å«ä»¥ä¸‹å‚è€ƒæ–‡ä»¶ï¼ˆåœ¨ `vercel-integration/` ç›®å½•ï¼‰ï¼š

- `app-router-route.js` - App Router å®Œæ•´ä»£ç 
- `pages-router-api.js` - Pages Router å®Œæ•´ä»£ç 
- `next.config.js` - Next.js é…ç½®ç¤ºä¾‹
- `vercel.json` - é™æ€ç½‘ç«™é…ç½®
- `vercel_proxy_guide.md` - è¯¦ç»†æŒ‡å—

æ ¹æ®é¡¹ç›®ç±»å‹é€‰æ‹©åˆé€‚çš„æ–‡ä»¶å³å¯ï¼

